% Gemini theme
% https://github.com/anishathalye/gemini

\documentclass[final]{beamer}
\usepackage{anyfontsize}

% ====================
% Packages
% ====================

\usepackage{magma}
\usepackage{xcolor}
\usepackage{amsmath, amssymb, amsfonts}

\usepackage{catalan-drawings}

\renewcommand{\baselinestretch}{1.1} 

\usepackage{lmodern}
\usepackage[T1]{fontenc}
\usepackage[size=a3, orientation=portrait, scale=1.5]{beamerposter}
\usetheme{gemini}
\usecolortheme{gemini}
\usepackage{graphicx}
\usepackage{booktabs}
\usepackage{tikz}
\usepackage{pgfplots}

% ====================
% Lengths
% ====================

% If you have N columns, choose \sepwidth and \colwidth such that
% (N+1)*\sepwidth + N*\colwidth = \paperwidth
\newlength{\sepwidth}
\newlength{\colwidth}
\setlength{\sepwidth}{0\paperwidth}
\setlength{\colwidth}{0.425\paperwidth}

\newcommand{\separatorcolumn}{\begin{column}{\sepwidth}\end{column}}

% ====================
% Title
% ====================
\makeatletter
\newcommand\HUGE{\@setfontsize\Huge{32}{47}} 
\makeatother
\makeatletter
\newcommand\SmallerBlockTitle{\@setfontsize\large{13}{13}} 
\makeatother
% {\HUGE\texttt{magma}}
\title{\HUGE Free Magma : A Library of Universal Catalan Bijections}

\author{Billy Price, Supervisor: Richard Brak}

\institute[shortinst]{~}

% ====================
% Footer (optional)
% ====================

\footercontent{
  % \href{https://www.example.com}{https://www.example.com} \hfill
  ~~Vacation Scholarship Program, 2020 \hfill
  \href{github.com/billy-price/FreeMagma}{\texttt{github.com/billy-price/FreeMagma}} \hfill
  My webpage: \href{billyprice.me}{billyprice.me}\quad}
% (can be left out to remove footer)

% ====================
% Logo (optional)
% ====================

% use this to include logos on the left and/or right side of the header:
% \logoright{\includegraphics[height=7cm]{logo1.pdf}}
% \logoleft{\includegraphics[height=7cm]{logo2.pdf}}

% ====================
% Body
% ====================

\newcommand{\getTri}[1]{\begin{tikzpicture}[line width=2pt, radius=3pt]\getdata{#1}\triangulations\end{tikzpicture}}
\newcommand{\getSP}[1]{\begin{tikzpicture}[line width=2.5pt, radius=4pt, scale=0.75]\getdata{#1}\staircasePolygons\end{tikzpicture}}
\newcommand{\getCBT}[1]{\scalebox{0.5}{\getdata{#1}\CBTs}}
\newcommand{\getArch}[1]{\begin{tikzpicture}[line width=2pt, radius=5pt, scale=0.64]\getdata{#1}\linkDiagrams\end{tikzpicture}}

  
  

% \definecolor{red}{RGB}{165, 38, 38}


\begin{document}
\begin{frame}[t]
\begin{columns}[t]
% \separatorcolumn
\begin{column}{\colwidth}

  \begin{block}{$1, 1, 2, 5, 14, 42, 132, 429, 1430, 4862\dots$}
    The Catalan Numbers are an integer sequence (OEIS. A000108 \cite{OEISCatalan}) counted by any of 214 combinatorial families described in Stanley's \textit{Catalan Numbers} \cite{stanley2015catalan}. We would like to understand properties of these families via bijections to other Catalan families, however, it would be infeasible to design $214 \times 213 = 4582$ direct bijections, and composing bijections lacks canonicity.

    Through R. Brak's insight that any Catalan family is a Free Magma on one generator \cite{brak2018universal}, we reduce the problem of finding bijections between pairs of families, to recognising the Free Magma structure within each family (just once for each family!). This means finding a unique way of multiplying and factorising objects.
    \[* : \textcolor{\fstColour}{\texttt{C}} \times \textcolor{\sndColour}{\texttt{C}} \to \texttt{C} \qquad \Delta : \texttt{C} \setminus \{\epsilon\} \to \textcolor{\fstColour}{\texttt{C}} \times \textcolor{\sndColour}{\texttt{C}}\]
  \end{block}
    {\usebeamerfont{caption}
    \begin{tabular}{cccc}
      \shortstack{Complete \\ Binary \\ Trees} & Triangulations & \shortstack{Staircase \\ Polygons} & \shortstack{Link \\ Diagrams} \\
      &&& \\
      % \shortstack{$\mathrm{Norm}=1$ \\ (generator)} & & & \\
      \getCBT{1} & \getTri{1} & \getSP{1} & \getArch{1} \\
      % $\mathrm{Norm}=2$ & & & \\
      \hline
      \getCBT{2} & \getTri{2} & \getSP{2} & \getArch{2} \\
      % $\mathrm{Norm}=3$ & & & \\
      \hline
      \getCBT{3} & \getTri{3} & \getSP{3} & \getArch{3} \\
      \getCBT{4} & \getTri{4} & \getSP{4} & \getArch{4} \\
      % $\mathrm{Norm}=4$ & & & \\
      \hline
      \getCBT{5} & \getTri{5} & \getSP{5} & \getArch{5} \\
      \getCBT{6} & \getTri{6} & \getSP{6} & \getArch{6} \\
      \getCBT{7} & \getTri{7} & \getSP{7} & \getArch{7} \\
      \getCBT{8} & \getTri{8} & \getSP{8} & \getArch{8} \\
      \getCBT{9} & \getTri{9} & \getSP{9} & \getArch{9} \\ \hline
    \end{tabular}
  }
  
  \vspace{1ex}
  
  \begin{block}{\SmallerBlockTitle Which Link Diagram do these larger objects biject to? }
      \begin{tabular}{ccc}
        \getCBT{10} & \renewcommand{\defaultRadius}{1.5} \getTri{10} & \getSP{10}
      \end{tabular}
    \end{block}




\end{column}

% \separatorcolumn

\begin{column}{\colwidth}

  % \begin{block}{A larger example - what does the corresponding link diagram look like?}
    
  %   % \begin{center}
  %   %   \getArch{10}
  %   % \end{center}
  % \end{block}


  \begin{alertblock}{\texttt{FreeMagma}}
    \texttt{FreeMagma} is an open-source library of Catalan families written in Python, which provides a universal bijection function. Given two Catalan families, \texttt{A}, \texttt{B}, we obtain the bijection, \texttt{bij::A -> B} recursively:\\
    \texttt{
    def bij(x):\\
    ~~~if x == A.generator:\\
    ~~~~~return B.generator\\
    ~~~else:\\
    ~~~~~first, second := A.factorise(x)\\
    ~~~~~return B.multiply( bij(first), bij(second) )}
    However, recognising the right multiplication rule is not always a trivial task, hence one purpose of \texttt{FreeMagma} is to gather a collection of as many valid multiplication/factorisation rules for Catalan families as possible.

    Mapping between representations of geometric Catalan families is no fun if we can't \textit{see} them, so \texttt{FreeMagma} provides functions for producing Ti\textit{k}Z output (see left) and \texttt{ascii} drawings wherever feasible.
  \end{alertblock}
  \begin{block}{Data Structures}
    A central challenge to this project was deciding on the best way to represent each family's objects in the code, especially as many Catalan families are geometric in nature, with many equivalent embeddings in the plane. Wherever possible, we chose representations that were:
    \begin{itemize}
      \item Intuitive for the user to input
      \item As canonical as possible
      \item Easy to manipulate 
    \end{itemize}
    % For example, we represent a Staircase Polygon as a pair of step sequences (representing the upper and lower paths), which are strings of \texttt{N}'s and \texttt{E}'s indicating north and east steps. This is both intuitive to input, independent of embedding, and makes the multiplication/factorisation functions easier to write.
  \end{block}
  \begin{block}{Caching for Speed}
    The recursive structure of Catalan families presents a significant danger in exponential blow-up. For instance, the standard algorithm for computing the list objects of size $m$ recursively calls itself $\mathcal{O}(m^2)$ many times! To remedy this, \texttt{FreeMagma} caches function calls where-ever possible. When bijecting an object with many occurrences of a sub-object, we only factorise and biject that sub-object once, and reuse that computation for every other occurence. 
  \end{block}

  % \begin{block}{Visualisation}
    

  %   % To emphasise the role of the recursive Free-Magma structure, \texttt{FreeMagma} also outputs Ti\textit{k}Z code with the \textcolor{\fstColour}{\texttt{first}} and \textcolor{\sndColour}{\texttt{second}} factor coloured. 
  % \end{block}

  \begin{block}{Acknowledgements}
    I would like to thank the Vacation Scholarship Program and Richard Brak for the opportunity to do this project and for Richard's expert advice. Also thank you Huy Quang Dinh for discovering many of the multiplication/factorisation rules.
  \end{block}
  
  \nocite{*}
  \footnotesize{\bibliographystyle{plain}\bibliography{poster}}

\end{column}

% \separatorcolumn

\end{columns}

  % \begin{tabular*}{\pagewidth}{c@{\extracolsep{\fill}}c@{\extracolsep{\fill}}c@{\extracolsep{\fill}}c@{\extracolsep{\fill}}}
  %   \getCBT{10} & \getTri{10} & \getArch{10} & \getSP{10}
  % \end{tabular*}

  
    
\end{frame}

\end{document}
